[GEOJSON](https://geojson.org/)
[GeoJSON](https://tools.ietf.org/html/rfc7946)
[中文翻译版本](https://www.oschina.net/translate/geojson-spec#geometry-objects)


# GeoJSON 格式

JSON:（JavaScript Object Notation）比XML数据更轻量、更容易解析。

GeoJSON 就是用json的语法表达和存储地理数据，可以说是json的子集。

GeoJSON是基于JavaScript JSON对象表示法的地理空间信息数据交换格式。

GeoJSON是一种对各种地理数据结构进行编码的格式。GeoJSON对象可以表示几何、特征或者特征集合。

GeoJSON支持下面几何类型：点、线、面、多点、多线、多面和几何集合。

GeoJSON里的特征包含一个几何对象和其他属性，特征集合表示一系列特征。



## GeoJSON 对象

案例：
```
{ 
    "type": "FeatureCollection",
    "features": [
		{ 
			"type": "Feature",
			"geometry": {"type": "Point", "coordinates": [102.0, 0.5]},
			"properties": {"prop0": "value0"}
        },
		{ 
			"type": "Feature",
			"geometry": {
				"type": "LineString",
				"coordinates": [
					  [102.0, 0.0], 
					  [103.0, 1.0],
					  [104.0, 0.0], 
					  [105.0, 1.0]
				]
			},
			"properties": {
				"prop0": "value0",
				"prop1": 0.0
			}
		},
		{ 
			"type": "Feature",
			"geometry": {
				"type": "Polygon",
				"coordinates": [
				   [ 
						[100.0, 0.0], 
						[101.0, 0.0], 
						[101.0, 1.0],
						[100.0, 1.0], 
						[100.0, 0.0] 
					]
				]
		   },
		   "properties": {
				"prop0": "value0",
				"prop1": {"this": "that"}
			}
       }
     ]
   }
```

GeoJSON总是由一个单独的对象组成。

GeoJSON对象必须由一个名字为"type"的成员。

type成员的值必须是下面之一："Point", "MultiPoint", "LineString", "MultiLineString", "Polygon",    "MultiPolygon",   "GeometryCollection", "Feature", 或者 "FeatureCollection"。



# type 详解

type 的那么多取值整体分为两类：特征对象 与 几何对象

特征对象分为:
```
- Feature (特征对象)
- FeatureCollection (特征集合对象)
```

几何对象分为:
```
- Point（点）
- MultiPoint（多点）
- LineString（线）
- MultiLineString（多线）
- Polygon（面）
- MultiPolygon（多面）
- GeometryCollection（几何集合）
```

这些几何对象地理要素被规划到geometry特征的type属性下。

并且不同的type会有不同的coordinates值。



# 特征集合对象

类型为"FeatureCollection"的GeoJSON对象是特征集合对象。

类型为"FeatureCollection"的对象必须由一个名字为"features"的成员。

与“features"相对应的值是一个数组。这个数组中的每个元素都是上面定义的特征对象。

通常一个 GeoJSON 对象的顶级都是从 FeatureCollection开始

```
{ 
  "type": "FeatureCollection",
  "features": []
}  
```


# 特征对象

类型为"Feature"的GeoJSON对象是特征对象。

- 特征对象必须由一个名字为"geometry"的成员，这个几何成员的值是上面定义的几何对象或者JSON的null值。
- 特征对戏那个必须有一个名字为“properties"的成员，这个属性成员的值是一个对象（任何JSON对象或者JSON的null值）。
- 如果特征是常用的标识符，那么这个标识符应当包含名字为“id”的特征对象成员。

```
{ 
  "type": "FeatureCollection",
  "features": [
	    {
			"type": "Feature",
			"geometry": {
				"type": "Point", "coordinates": [102.0, 0.5]
			},
			"properties": {"prop0": "value0"}
	    },
  ]
}
```


# 几何对象地理要素

## Point（点）

点要素是最简单的，类型type对应Point，然后坐标是一个1维的数组，里面有两个元素（如果是立体的坐标就是三维x,y,z），分别为经度和纬度。

coordinates 的值是一个点。

```
"geometry":{
	"type":"Point",
	"coordinates":[105.380859375,31.57853542647338]
}
```


## MultiPoint（多点）

coordinates 的值是多个点。

```
"geometry":{
	"type":"MultiPoint",
	"coordinates":[
		[105.380859375,31.57853542647338],
		[105.580859375,31.52853542647338]
	]
}
```


## LineString（线）

线要素就是指线段，记录的是线的端点坐标，可视化时会按照记录顺序联结。
对于曲线（如贝塞尔曲线）目前还没有很好的表达，但是在地理数据中，曲线一般会用LineString去拟合，现实地理世界中也没有标准的曲线地理要素。

coordinates 里的二维数组和多点要素基本一样，区别就在type上了。

```
"geometry":{
    "type":"LineString",
    "coordinates":[
		[105.6005859375,30.65681556429287],
        [107.95166015624999,31.98944183792288],
        [109.3798828125,30.031055426540206],
        [107.7978515625,29.935895213372444]
	]
} 
```


## MultiLineString（多线）

一个三维数组，一条线连完，连下一条线

coordinates 是一个三维数组，因为每条线是二维数组，所以多线是三维数组

```
"geometry":{
	"type":"MultiLineString",
	"coordinates":
	[
		[
			[105.6005859375,30.65681556429287],
			[107.95166015624999,31.98944183792288],
			[109.3798828125,30.031055426540206],
			[107.7978515625,29.935895213372444]
		], //一条线，注意开始点和结束点不一样。
		[
			[109.3798828125,30.031055426540206],
			[107.1978515625,31.235895213372444]
		] //第二条线
	]
}

```


## Polygon（面）

coordinates 是一个三维数组。

### 一个无孔单面。

```
"geometry":{ 
	"type": "Polygon",
	"coordinates": [
		// 多个点首尾相接组成面， 首尾点相同
		[ 
			[100.0, 0.0], 
			[101.0, 0.0], 
			[101.0, 1.0], 
			[100.0, 1.0], 
			[100.0, 0.0] 
		] 
	] 
}
```


### 一个有孔单面。

这个数组的第一个元素表示的是外部环。其他后续的元素表示的内部环（或者孔）。

```
"geometry":{ 
	"type": "Polygon",
	"coordinates": [
		// 多个点首尾相接组成面， 首尾点相同。 第一组点表示外围
		[ 
			[100.0, 0.0], 
			[101.0, 0.0], 
			[101.0, 1.0], 
			[100.0, 1.0], 
			[100.0, 0.0] 
		],
		// 第二组点 及 后面组 表示内部环（或者孔）
	    [ 
			[100.2, 0.2], 
			[100.8, 0.2], 
			[100.8, 0.8], 
			[100.2, 0.8], 
			[100.2, 0.2] 
		] 
	] 
}
```

上面的坐标构成了一个像 “回” 字一样的中间被挖空的面


## MultiPolygon（多面）

coordinates 是一个四维数组。

### 两个不会相交的面。

```
"geometry": {
	"type": "MultiPolygon",
	"coordinates":
	[   
		// 第一个面，是个三维数组
		[
			[
				[109.2041015625,30.088107753367257],
				[115.02685546875,30.088107753367257],
				[115.02685546875,32.7872745269555],
				[109.2041015625,32.7872745269555],
				[109.2041015625,30.088107753367257]
			] 
		], 
		// 第一个面，是个三维数组
		[
			[
				[112.9833984375,26.82407078047018],
				[116.69677734375,26.82407078047018],
				[116.69677734375,29.036960648558267],
				[112.9833984375,29.036960648558267],
				[112.9833984375,26.82407078047018]
			] 
		] 
	]
}
```


### 两个镶套的面。

小的面表示在前，大的面表示在后，效果不是有洞的。

```
"geometry": {
	"type": "MultiPolygon",
	"coordinates":
	[ 
		// 小的面在前
		[
			[
				[101.6455078125,27.68352808378776],
				[114.78515624999999,27.68352808378776],
				[114.78515624999999,35.209721645221386],
				[101.6455078125,35.209721645221386],
				[101.6455078125,27.68352808378776]
			]   
		], 
		// 大的面在后
		[
			[
				[104.2822265625,30.107117887092357],
				[108.896484375,30.107117887092357],
				[108.896484375,33.76088200086917],
				[104.2822265625,33.76088200086917],
				[104.2822265625,30.107117887092357]
			]
		]
	] 
}
```

### 有孔洞的多面。

 注意层级不太一样。

```
"geometry": {
	"type": "MultiPolygon",
	"coordinates":
	[ 
		// 大的面在前
		[
			[
				[104.2822265625,30.107117887092357],
				[108.896484375,30.107117887092357],
				[108.896484375,33.76088200086917],
				[104.2822265625,33.76088200086917],
				[104.2822265625,30.107117887092357]
			]
		],
		// 小的面在后
		[
			[
				[101.6455078125,27.68352808378776],
				[114.78515624999999,27.68352808378776],
				[114.78515624999999,35.209721645221386],
				[101.6455078125,35.209721645221386],
				[101.6455078125,27.68352808378776]
			]   
		], 
	] 
}
```


## GeometryCollection（几何集合）

GeometryCollection是多种基本地理要素的集合，就是里面可以包含点、线、面要素。

这个是个特殊的要素，不需要放在FeatureCollection里。

```
{
    "type": "GeometryCollection",
    "geometries": [
         {
            "type": "Point",
            "coordinates": [108.62, 31.02819]
         }, 
        {
            "type": "LineString",
            "coordinates": [
				[108.896484375,30.1071178870],
				[108.2184375,30.91717870],
				[109.5184375,31.2175780]
			]
         }
    ]
}
```
