
# 为什么需要前端监控
- 前端应用的复杂度也越来越高，用户环境差异很大。导致出现问题很难复现。
- 区别于后台的性能监控，前端性能监控主要为了提升用户体验
- 用户渠道统计，运营反馈工具


# 期望的前端监控系统

- 自动捕获未处理的错误（js错误，vue 错误，promise错误，资源加载错误，http错误）
- 自动静默错误上报，自动区分用户 
- 尽可能记录错误发生前的用户行为
- 自动统计常用的埋点数据（PV/PC等数据统计）
- 支持自定义上报事件和数据
- 性能检测统计
- 后台有完善的可视化统计数据
- 错误查看还原程度高（SourceMap还原出错源代码，用户出错钱的一系列行为，录屏）
- 私有化部署
- 免费
- 支持vue PC项目，uni-app跨端项目（或者pc与移动端用不同产品）


### fundebug
优点：
- 错误监控与还原 
- 可自定义错误
- 接入简单	
- 有小程序版本
- 支持sass和私有化部署
- 支持自己生成 SourceMap

缺点：
- 有微信小程序版本，但不支持uni-app全端
- 无统计能力
- 无扩展能力
- 收费


### sentry
- 开源，接入简单
- 性能分析
- 报警
- 支持sass和私有化部署
- 支持自己生成 SourceMap

### webfunny
- 错误监控与还原
- 性能分析
- 收费
- 只支持私有化部署

### uni-app统计
- 免费
- 无开发量，接入简单。兼容各端
- 不支持私有化部署，监控数据丢失
- 无法扩展


### uni-app统计2.0
- 免费
- 统计能力强大，支持uni各平台汇总统计
- 开源，灵活，可扩展
- 只支持私有化部署

缺点：
- 接入麻烦，需开通搭建 unicloud/serverless


友盟+
收费



# 对比
| / | fundebug | sentry | webfunny | uni-app统计 | uni-app统计2.0 |
| --- | --- | --- | --- | --- | --- |
| 免费 | 0 | 100 | 0 | 100 | 100 |
| 错误追踪 | 100 | 80 | 90 | 50 | 50 |
| 统计分析 | 0 | 70 | 80 | 100 | 100 |
| 扩展性 | 0 | 80 | 0 | 0 | 100 |
| 私有化部署 | 100 | 100 | 100 | 0 | 100 |
| 接入成本 | 100 | 100 | 70 | 100 | 70 |



# 结论

PC端推荐使用：sentry

uni-app推荐：uni-app统计2.0

> 面向C端的产品错误较多时可以考虑临时接入 fundebug 排查错误


# 规划

基于 uni-app统计2.0 进行扩展，强化错误收集功能

使用 serverless/云函数/Nodejs/mongodb 扩展一套前端监控：

- 私有化：数据可以保存在自己的服务器上；
- 扩展性：灵活性强，可以自定义功能，比如你可以在触发异常时，接入自己的钉钉或企业微信消息推送，这就需要你的监控系统灵活性很高。
- 灵活性：自定义采集规则。不同规则采集到的数据不一样，因此第三方标准的采集规则可能并不符合你公司的需求。比如有的公司需要获取设备标识作为唯一 ID，有的公司却需要用户标识。


链接：
[sentry](https://sentry.io/)
[fundebug](https://www.fundebug.com/)
[webfunny](https://www.webfunny.cn/)
[uni统计](https://tongji.dcloud.net.cn/)
[uni统计2.0](https://uniapp.dcloud.net.cn/uni-stat-v2.html)