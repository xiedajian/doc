
















可能是你见过最完善的微前端解决方案




## 应用间通信

应用间通信：我们使用了@ice/stark-data，自定义发布-订阅通信的实现，处理全局消息通信和数据管理，解决如用户登录后，主子应用间共享用户信息的问题。


# 工程与业务价值

基于该方案，对工程和业务带来的价值有：

解决DevOps在作为一个大型单体应用条件下开发维护成本高的问题；
新模块开发能享受独立开发、部署，灵活上线的便利；
子应用开发技术栈无关，团队能快速试验新技术；(技术栈无关 主框架不限制接入应用的技术栈，子应用具备完全自主权)
应用自治，功能内聚，降低系统复杂度；
更灵活的系统组合，基于现有子应用自由组合出新的系统；
大幅度降低构建时间，提升开发体验。



## JS Entry vs HTML Entry
在确定了运行时载入的方案后，另一个需要决策的点是，我们需要子应用提供什么形式的资源作为渲染入口？

JS Entry 的方式通常是子应用将资源打成一个 entry script，比如 single-spa 的 example 中的方式。但这个方案的限制也颇多，如要求子应用的所有资源打包到一个 js bundle 里，包括 css、图片等资源。除了打出来的包可能体积庞大之外的问题之外，资源的并行加载等特性也无法利用上。

HTML Entry 则更加灵活，直接将子应用打出来 HTML 作为入口，主框架可以通过 fetch html 的方式获取子应用的静态资源，同时将 HTML document 作为子节点塞到主框架的容器中。这样不仅可以极大的减少主应用的接入成本，子应用的开发方式及打包方式基本上也不需要调整，而且可以天然的解决子应用之间样式隔离的问题(后面提到)。