

[Web端H.265播放器研发解密](https://blog.csdn.net/weixin_34379433/article/details/89535511)

[基于WASM的H265 Web播放器](https://blog.csdn.net/sonysuqin/article/details/86770715)


存储视频需要大量存储空间。为了使其易于管理，开发了视频压缩技术来压缩视频，也称为编解码器。


## H.264 / AVC


2003年，发布了编解码器h.264（商业名称为AVC）。

现在，它已成为视频压缩的行业标准，因为它提供了良好的压缩效果，几乎可以在任何设备和平台上播放。

所有现代的浏览器，操作系统和移动平台都支持h.264。


## H.265 / HEVC

H.265又称HEVC(全称High Efficiency Video Coding，高效率视频编码)，是ITU-T H.264/MPEG-4 AVC标准的继任者。

相比H.264，H.265拥有更高的压缩率，也就意味着同样码率（又称比特率是指每秒传送的比特(bit)数。

单位为bps(Bit Per Second)，比特率越高，每秒传送数据就越多，画质就越清晰），H.265的画质会更清晰，更高的压缩率就能使用更低的存储和传输成本。

HEVC承诺在相同视频质量的情况下将带宽减少50％。

节省大量资金并带有Cloud记录功能，这意味着在您的位置安装5或10个IP安全摄像机之间的区别。





尽管h.265是在5年前发布的，但采用速度很慢。
这样做的主要原因是，与拥有1个专利池的h.264不同，
h.265具有3个具有不同定价结构和条款和条件的专利池。
第二个专利池（HEVC Advance）于启动三年后于2015年推出。
关于h.265左右的专利使用费情况的不确定性阻碍了其采用，
因此主要浏览器根本不支持（例如Chrome，Firefox）或仅部分支持（Edge）。
因此，许多内容提供商一直坚持使用h.264，因为至少他们知道它会一直播放。


背景：

　　H.265许可证在历史上一直非常昂贵。
在某些情况下，其价格比H.264高出几个数量级。
MPEG-LA和HEVC Advance专利池期望苹果和微软等公司为此付费。
但是他们通过取消价格上限而变得过于贪婪（特别是HEVC Advance），
因此微软将不得不为H.265支付数亿美元，而H.264的价格则低至数百万美元。
HEVC Advance更改了许可政策，但可能为时已晚，
因为Google Microsoft，Amazon，Netflix，Cisco，Mozilla和其他公司
正在开发免版权使用费的替代方案（以开放媒体联盟的名义），因此他们不会再被在线视频所要挟。


## 浏览器现状

因为H.265专利及硬解支持情况不完善的原因，主流现代浏览器均不兼容H.265编码的视频播放（Edge新版本以插件方式支持），

但是因为Apple对H.265的支持，移动端ios safari在11.0版本以上支持原生播放。

想要在浏览器端播放H.265视频原生的<video />标签没有办法支持，

但是因为视频格式本身是连续图像画面和音频的集合，参考了chromium的源码及video标签内部的实现原理，

可以通过<canvas /> + Web Audio API 的结合来模拟实现一个虚拟的video标签来实现播放器功能。



## AV1
　　
2015年，谷歌，微软，Mozilla和思科等多家大型IT公司发起了开放媒体联盟，
以创建一个称为AV1的开放且免版税的编解码器。
基于谷歌的开放式“ VP10”编解码器以及思科“ Thor”和Mozilla的“ Daala”编解码器技术，
该联盟着手为h.265创建替代方案。该编解码器是h.265的强大竞争对手，其原因有5个：

免版税
AV1完全免版税，这意味着无需向任何专利池支付专利。
Google已经证明可以使用VP9发布免版税的编解码器。
此外，编解码器将是开放源代码，并且具有非常宽松的BSD许可证，可加快采用速度。

更好的压缩
根据您使用的基准，AV1将比h.265 / HEVC好约30％。
再次以合理的CPU成本进行了重大改进。
与HEVC相比，AV1还将在低比特率摄像机上显示出这些改进，这对IP安全摄像机特别有用。

都在使用
有了APPLE，GOOGLE，MICROSOFT和MOZILLA支持AV1，
我们可以期望在不久的将来所有主要浏览器和操作系统都将提供支持。
有了这个新的编解码器，几乎不可能在主要浏览器中支持h.265。
与h.265不同，Firefox的开发版本中已经提供了AV1支持。

硬件加速
解码视频需要大量CPU。
诸如笔记本电脑，手机或平板电脑之类的许多设备都具有硬件加速功能，
以防止发热的设备和电池耗尽。
AV1得到了主要芯片供应商（如INTEL，AMD，BROADCOM和ARM）的支持。
我们将需要至少一年的时间才能看到首批AV1附带的设备，但是硬件支持看起来很有希望。

内容提供商支持AV1
NETFLIX，FACEBOOK，YOUTUBE，BBC，AMAZON和HULU等主要内容提供商将在AV1中提供内容。
Youtube已经抵制HEVC，仅通过其自己的VP9编解码器提供4K视频。
因此，它目前无法在Apple设备上播放。 

