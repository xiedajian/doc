
# 在线表格衍生业务

## 表单数据填报

### 场景

a:   调查问卷   （c端，无权限，无回看 ）(记录回看 - 浏览器指纹/移动端微信 等弱身份关联)
b：数据录入   （b端，有权限，关联到用户，能回看）

### 功能变动

1.设计器增加模式：发布为填报表单

- 表单名称
- 选择分组
- 是否需要权限  （开启权限后需要登录才能填写，关联用户记录。不开启权限任何人都能填写，无法查看记录）
- 填报频率         单次，时间间隔（日，周，月）
- 有效期        （投票的截止时间）
- 发布到表单填报方案中心
- 发布后生成外网独立访问地址	
- 表单默认关联当前启动版，后续发布新版本自动更新 （无多版本回退）	

  

2.表单填报中心页面    

- 分组, 列表
- 修改表单属性信息   （名称，权限，频率，有效期，重新生成访问地址，启动/关闭/删除）
- 数据权限控制不同人员看到不同表单   （如何控制？）
- 点击进入表单填报页面



3.表单填报页面   

- 提交数据代表着新增
- 不登录时额外记录 浏览器指纹/移动端微信 等弱身份信息，用于回看关联
- 入库两个表。1填报记录表，不存数据，使用时关联查询业务表  2.在线表格设计的业务表
- 提交完成后提示成功，停留在本页面，数据变为只读，操作按钮隐藏



4.表单填报历史记录列表-个人    

- 该表单当前登录人的所有填报历史

- 非登录时弱指纹关联查看。 （入口在哪？）

  

5.表单填报历史单条记录查看

- 只读，无操作按钮





### 数据库

- 数据填报方案分组表
- 数据填报方案表     
	- id
	- onl_table_id     关联在线表格方案id
	- name
- 填报记录表
	- id
	- 填报方案id
	- onl_table_id
	- 业务主表关联id
	- 填报人

### 问题讨论

1.是否需要版本控制
2.一个方案是否能发布多次，不同的名字。
3.是否动态创建表
4.表单底部按钮是否像工作流一样外部定义  （两类按钮，表单内部按钮【表单环境】，表单外部的操作按钮【表格环境】）


## 批量数据填报

对于批量填报多条数据的需求，采用类似excel动态导入的方案，数据从 excel文件上传入库

区别于动态导入需要单独设计导入方案，批量导入依赖在线表格设计后自动生成导入方案。

在线表格设计后提供模版下载，文件上传入库。

- 和现有的在线表格上传下载的区别？





#  数据填报差异

- ui重新设计，与数据中台风格一致
- 设计器采用在线表格简版，不需要重做设计





### 数据填报-管理页

- 分组独立到左侧进行管理
- 右侧表格按照其他表格ui方式展示。 搜索条件只保留名称搜索，无需其他



功能

- 设计
- 预览
- 协同授权

- 填报任务下发
- 管理数据
- 入库审批
- 属性 
- 分享
- 复制
- 删除





设计，预览无需设计。复用现有的在线表格。



